# TURNtoURN

## Transformation from TURN to URN using ATL
  
**ATL -** Phase 1 of transformation. Turn2Urn.atl is the primary transformation file and **uses** ConnectNodes.atl using Module Superimposition  
  
**Input -** TURN model saved in .xml format (sample file provided)  
  
**Output -** .jucm output generated by transformation  
  
**Metamodels -** Turn.ecore    
  
**Expected Outputs -** expected output .jucm files for all test cases  
  
**Turn2UrnPhase2.java -** Phase 2 of transformation 

## TODO
* Verify functionality of Turn2Urn.atl is equivalent to original before proceeding
* Determine if "conns" stands for "connections"; if so then replace where relevant
* Decide on a naming convention for source and target model elements. Either stick to s and t or have the names be descriptive.
* Start returning code from ConnectNodesTemporarilyRemovedCode to ConnectNodes.atl. Refactor it and improve its efficiency as you go.
* Potential patterns to generalize into methods:
	* x -> collect(y|y.someProperty) -> flatten() -> collect(z|thisModule.resolveTemp(z, 'someString'))
		* getting referenced points; resolveTemp('tSomething'...); need to determine if resolveTemp works with correct containment in a called method
	* is it possible to use the called rules created as methods directly in the "to" block? That would remove the need for a lot of the do blocks.
	* determine if the ordering of the conditional statements in InBinding2InBinding and OutBinding2OutBinding matters; if not then they can be modularized
	* the code in Condition2Condition essentially just joins a bunch of strings; is there any way to do this more cleanly?
	* else { if { } } to else if { }
* Change names of variables that are single letters (in particular, haven't handled this in the case of parameters for called rules)
* Refactor for increased consistency
	* All if and else loops, including single line ones, should have braces
* Rearrange methods so that their order feels more natural.

## Design choices
* Note that this is not like an OOP language where initNextItem instantiates the object before it can be assigned a name; the object is initialized in the "for" block; the choice of calling id first is merely for familiarity